# Install VMware Fusion 13.6.2 on Mac
https://sloopstash.com/knowledge-base/how-to-install-vmware-fusion-on-mac.html

# Master
## khởi tạo một Cluster
kubeadm init --apiserver-advertise-address=172.16.11.100 --pod-network-cidr=192.168.0.0/16

## Cài đặt giao diện mạng calico sử dụng bởi các Pod
kubectl apply -f https://raw.githubusercontent.com/projectcalico/calico/v3.29.1/manifests/calico.yaml

```
mkdir -p $HOME/.kube
sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config
sudo chown $(id -u):$(id -g) $HOME/.kube/config
```

# Local
## Thông tin cluster
kubectl cluster-info

## Các node (máy) trong cluster
kubectl get nodes

## Các pod (chứa container) đang chạy trong tất cả các namespace
kubectl get pods -A

## Xem nội dung cấu hình hiện tại của kubectl
kubectl config view

## Lấy config của master
scp root@172.16.11.100:/etc/kubernetes/admin.conf ~/.kube/config-mycluster

## Thiết lập file cấu hình kubectl sử dụng cho 1 phiên làm việc hiện tại của termianl
export KUBECONFIG=/Users/finbertmds/.kube/config-mycluster

## Gộp file cấu hình kubectl
export KUBECONFIG=/Users/finbertmds/.kube/config:/Users/finbertmds/.kube/config-mycluster
kubectl config view --flatten > ~/.kube/config_temp
mv ~/.kube/config_temp ~/.kube/config
export KUBECONFIG=

## Các ngữ cảnh hiện có trong config
kubectl config get-contexts

## Đổi ngữ cảnh làm việc (kết nối đến cluster nào)
kubectl config use-context kubernetes-admin@kubernetes

## Lấy mã kết nối vào Cluster
kubeadm token create --print-join-command

# Worker
## node worker kết nối vào Cluster
kubeadm join 172.16.10.100:6443 --token ...

# Local, delete cluster - context -user
kubectl config delete-cluster kubernetes
kubectl config delete-context kubernetes-admin@kubernetes
kubectl config unset users.kubernetes-admin
